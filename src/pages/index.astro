---
import BaseLayout from '../layouts/BaseLayout.astro';
---

<BaseLayout title="Countable Metrics Odometer Diary">
  <h1>Countable Metrics Odometer Diary</h1>
  <p>
    Bienvenido. Aquí podrás registrar y visualizar métricas relacionadas con el
    odómetro, combustible y aceite.
  </p>

  <div class="botonera">
    <a href="/kilometraje">
      <button type="button" id="btn-km-diario">Introducir kilometraje diario</button>
    </a>

    <a href="/configuracion-gasolina">
      <button type="button">Configuración gasolina</button>
    </a>

    <a href="/configuracion-aceite">
      <button type="button">Configuración aceite</button>
    </a>

    <a href="/resumen">
      <button type="button">Ver resumen mensual</button>
    </a>

    <a href="/borrar-datos">
      <button type="button">Borrar datos</button>
    </a>
  </div>

  <script type="module">
    const btnKm = document.getElementById('btn-km-diario');
    if (btnKm) {
      const configGasolina = localStorage.getItem('configGasolina');
      const configAceite = localStorage.getItem('configAceite');

      const habilitado = Boolean(configGasolina && configAceite);
      if (!habilitado) {
        btnKm.setAttribute('disabled', 'true');
        btnKm.style.opacity = '0.5';
        btnKm.style.cursor = 'not-allowed';
        btnKm.title =
          'Configura primero gasolina y aceite para poder introducir kilometraje diario.';

        // Evitar navegación si se hace clic en el enlace
        const parentLink = btnKm.closest('a');
        if (parentLink) {
          parentLink.addEventListener('click', (e) => {
            e.preventDefault();
          });
        }
      }
    }
  </script>
</BaseLayout>
